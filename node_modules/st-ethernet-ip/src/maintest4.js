const { Controller} = require('./index.js');

const PLC = new Controller();

PLC.connect("192.168.86.200", 0).then(async () => {


    const tag = PLC.newTag('UDT_ARRAY2', null, true, 1)
    const tag2 = PLC.newTag('testString')
    const tag3 = PLC.newTag('stringArray', null, true, 1)
    const tag4 = PLC.newTag('bigTest')
    
    
    await PLC.getTagArraySize(tag3)
    
    await PLC.readTag(tag2)
    await PLC.readTag(tag3)
    await PLC.readTag(tag4)



    console.log(tag2.value)
    console.log(tag3.value)
    console.log(tag4.value)

    tag2.value = 'Hello World!'

    tag3.value[19] = 'The End'
    
    tag4.value.Struct1[3] = true;

    tag4.value.Group1[2].VAR2_STRING = 'What Do You Mean?'
    
    await PLC.writeTag(tag2)
    await PLC.writeTag(tag3)
    await PLC.writeTag(tag4)
    
}).catch(async e => {
    console.log(e)
});