const { Controller, Tag, EthernetIP} = require("./index");


const tag = new Tag("Integer2");

console.log(tag.state.tag.path);

const instancePath = Buffer.from([0x20, 0xb2, 0x25, 0x00, 0x00, 0x00]);

instancePath.writeUInt16LE(55838, 4);
console.log(instancePath);

//tag.state.tag.path = instancePath
console.log(tag.state.tag.path);
const PLC = new Controller(true);

PLC.connect("192.168.86.200", 0).then(() => {
    let n = 1;
    setInterval(() => {
        instancePath.writeUInt16LE(55838, 4);
        //tag.state.tag.path = instancePath
        n++;
        PLC.readTag(tag).then(() => {
            console.log(tag.value);
            process.exit();
        }).catch((e) => {
            throw e;
        } );
    
    }, 100);
}).catch(e => {
    console.log(e);
});


  